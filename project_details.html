<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project Details</title>

  <!-- Load the navigation bar -->
  <script>
    fetch('/Website/navbar.html')
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to load navigation bar');
        }
        return response.text();
      })
      .then(data => {
        document.body.insertAdjacentHTML('afterbegin', data);
        console.log('Navigation bar loaded successfully');
      })
      .catch(error => {
        console.error('Error loading navigation bar:', error);
      });
  </script>

  <!-- Styles -->
  <style>
    nav {
      position: fixed;
      top: 0;
      right: 0;
      width: 100%;
      background-color: lightgreen;
      padding: 15px 0 15px 20px;
      text-align: right;
      z-index: 1000;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin-left: 20px;
      font-size: 12px;
      font-weight: bold;
      background-color: blue;
      padding: 8px;
      border-radius: 10px;
    }

    nav a:hover {
      background-color: darkblue;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 60px 0 0;
      padding: 20px;
      background-color: #f9f9f9;
    }

    .project-details {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .project-details h2 {
      margin-top: 0;
      color: #333;
    }

    .project-details p {
      margin: 10px 0;
      color: #555;
      word-wrap: break-word;
    }

    .file-section iframe,
    .file-section img,
    .file-section video {
      max-width: 100%;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-top: 10px;
    }

    .file-section a {
      display: inline-block;
      margin-top: 10px;
      color: #007BFF;
      text-decoration: none;
    }

    .file-section a:hover {
      text-decoration: underline;
    }

    .dashboard-embed {
      margin-top: 20px;
      text-align: center;
    }

    .dashboard-embed iframe,
    .dashboard-embed img {
      width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .comments-section {
      margin-top: 20px;
      padding: 10px;
      background-color: #f1f1f1;
      border-radius: 8px;
    }

    /* ------- RESPONSIVE DESIGN ------- */
    @media (max-width: 768px) {
      nav {
        text-align: center;
        padding: 10px;
      }

      nav a {
        margin: 5px;
        font-size: 11px;
        padding: 6px;
      }

      .project-details {
        margin: 10px;
        padding: 15px;
      }

      .dashboard-embed iframe {
        height: 300px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }

      .project-details {
        padding: 10px;
      }

      .dashboard-embed iframe {
        height: 250px;
      }

      .file-section iframe,
      .file-section video {
        height: auto;
      }

      .file-section a,
      .dashboard-embed a {
        font-size: 14px;
        display: block;
        margin-top: 5px;
      }
    }
  </style>

  <!-- Script to load project details -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      fetch('projects.json')
        .then(response => {
          if (!response.ok) throw new Error('Failed to load project data');
          return response.json();
        })
        .then(data => {
          const urlParams = new URLSearchParams(window.location.search);
          const projectTitle = urlParams.get('title');
          const project = data.find(p => p.title === projectTitle);

          if (project) {
            document.getElementById('title').textContent = project.title;
            document.getElementById('highlight').textContent = project.highlight;
            document.getElementById('description').textContent = project.description;

            document.getElementById('githubLink').href = project.githubLink;
            document.getElementById('githubLink').textContent = project.githubLink;

            document.getElementById('visualizationUrl').href = project.visualizationUrl;
            document.getElementById('visualizationUrl').textContent = project.visualizationUrl;

            document.getElementById('deploymentUrl').href = project.deploymentLink;
            document.getElementById('deploymentUrl').textContent = project.deploymentLink;

            document.getElementById('slidePresentation').src = project.slides;
            document.getElementById('slideDownload').href = project.slides;

            document.getElementById('notebookPresentation').src = project.notebook;
            document.getElementById('notebookDownload').href = project.notebook;

            document.getElementById('videoSection').innerHTML = `
              <iframe width="100%" height="400px" src="${project.videoLink}" title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
              </iframe>
              <a id="videoDownload" href="${project.videoLink}" download>Download Video</a>
            `;

            document.getElementById('dashboardEmbed').innerHTML = `
              <img src="${project.dashboard}" alt="Dashboard Image" />
              <a id="dashboardDownload" href="${project.dashboard}" download>Download Dashboard</a>
            `;

            document.getElementById('commentsSection').innerHTML = `
              <h3>Comments</h3>
              <p>${project.comments}</p>
            `;
          } else {
            console.error('No project found with title:', projectTitle);
          }
        })
        .catch(error => console.error('Error loading project data:', error));
    });
  </script>
</head>

<body>
  <div class="project-details">
    <h2>Project Details</h2>
    <p><strong>Title:</strong> <span id="title"></span></p>
    <p><strong>Highlight:</strong> <span id="highlight"></span></p>
    <p><strong>Description:</strong> <span id="description"></span></p>

    <p><strong>GitHub Link:</strong> <a id="githubLink" target="_blank"></a></p>
    <p><strong>Data Analysis Link:</strong> <a id="visualizationUrl" target="_blank"></a></p>
    <p><strong>Deployment URL:</strong> <a id="deploymentUrl" target="_blank"></a></p>

    <div class="file-section">
      <h3>Slide Presentation</h3>
      <iframe id="slidePresentation" src="" width="100%" height="400px" frameborder="0" scrolling="no"></iframe>
      <a id="slideDownload" href="#" download>Download Slide Presentation</a>
    </div>

    <div class="file-section">
      <h3>Notebook</h3>
      <iframe id="notebookPresentation" src="" width="100%" height="400px" frameborder="0" scrolling="no"></iframe>
      <a id="notebookDownload" href="#" download>Download Notebook</a>
    </div>

    <div class="file-section">
      <h3>Video</h3>
      <div id="videoSection"></div>
    </div>

    <div class="dashboard-embed">
      <h3>Dashboard</h3>
      <div id="dashboardEmbed"></div>
    </div>

    <div id="commentsSection" class="comments-section"></div>
  </div>

  <script>
    function downloadFile(url, filename) {
      const link = document.createElement('a');
      link.href = url;
      link.download = filename;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>
</body>
</html>
